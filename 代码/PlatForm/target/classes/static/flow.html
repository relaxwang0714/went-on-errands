<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
		<link rel="stylesheet" href="css/flow.css" />
	</head>
	<body>
		
		<!--上部-->
		<div id="flow_top">
			<div class="flow_list">
				<img src="img/flow_1.png" />
				<div class="fl_top">跑腿平台访问量</div>
				<div class="fl_mid">
					<div class="fl_title"><b>访客数</b></div>
					<div class="fl_num"><b>168</b></div>
				</div>
				<div class="fl_bottom">
					<div class="fl_title"><b>较前日同时段</b></div>
					<div class="fl_sign"></div>
				</div>
			</div>
			<div class="flow_list">
				<img src="img/flow_2.png" />
				<div class="fl_top">配送员访问量</div>
				<div class="fl_mid">
					<div class="fl_title"><b>访客数</b></div>
					<div class="fl_num"><b>168</b></div>
				</div>
				<div class="fl_bottom">
					<div class="fl_title"><b>较前日同时段</b></div>
					<div class="fl_sign_2"></div>
				</div>
			</div>
			<div class="flow_list">
				<img src="img/flow_3.png" />
				<div class="fl_top">转化</div>
				<div class="fl_mid">
					<div class="fl_title"><b>访客数</b></div>
					<div class="fl_num"><b>168</b></div>
				</div>
				<div class="fl_bottom">
					<div class="fl_title"><b>较前日同时段</b></div>
					<div class="fl_sign"></div>
				</div>
			</div>
		</div>
		
		<!--中部-->
		<div id="flow_mid">
			<div class="fl_mid_1">
				<div class="fl_mid_title">访客数</div>
				<div class="fl_mid_num"><b>387</b></div>
				<div class="fl_mid_sign"></div>
			</div>
			<div class="fl_mid_1">
				<div class="fl_mid_title">浏览量</div>
				<div class="fl_mid_num"><b>216</b></div>
				<div class="fl_mid_sign"></div>
			</div>
			<div class="fl_mid_1">
				<div class="fl_mid_title">人均浏览量</div>
				<div class="fl_mid_num"><b>56.00</b></div>
				<div class="fl_mid_sign"></div>
			</div>
			<div class="fl_mid_1">
				<div class="fl_mid_title">分享人数</div>
				<div class="fl_mid_num"><b>145</b></div>
				<div class="fl_mid_sign"></div>
			</div>
		</div>
		
		<!--下部-->
		<div id="flow_bottom">
			<canvas id="myChart" width="550" height="180"></canvas>
		</div>
		<script src="js/jquery-3.1.1.min.js"></script>
		<script>
			$(document).ready(function(){
				$.ajax({
				type:"get",
				url:"statistics/flow",
				async:true,
				dataType: "json",//预期服务器返回的数据类型
				success:function(result){
					$('.fl_num').eq(0).text(result.customerPv);
					$('.fl_num').eq(1).text(result.collectorPv);
					$('.fl_mid_num').eq(0).text(result.ip);
					$('.fl_mid_num').eq(1).text(result.pv);
					$('.fl_mid_num').eq(2).text(result.avgPv);
					$('.fl_mid_num').eq(3).text(result.share);
				},
				error: function(){
				}
				});
			var ctx = document.getElementById("myChart").getContext('2d');
			var length = 7;
			var i = 0;
			var j = ",";
			var myChart = new Chart(ctx, {
			    type: 'line',
			    data: {
			        labels: ["January", "February", "March", "April", "May", "June"],
			        datasets: [{
			            label: '今日访客数',
			            data: [24, 18, 23, 35, 38, 53],
			            backgroundColor: [
			                'rgba(255, 255, 255, 0.2)'
			            ],
			            borderColor: [
							'rgba(237, 125, 49,1)'
			            ],
			            borderWidth: 1
			        },
			       	{
			            label: '昨日访客数',
			            data: [4, 22, 17, 43, 28, 45],
			            backgroundColor: [
			                'rgba(255, 255, 255, 0.2)'
			            ],
			            borderColor: [
							'rgba(68,114,196,1)'
			            ],
			            borderWidth: 1
			        }
			        ]
			    },
			    options: {
			        scales: {
			            yAxes: [{
			                ticks: {
			                    beginAtZero:true
			                }
			            }]
			        }
			    }
			});
		})
		</script>
	</body>
</html>
