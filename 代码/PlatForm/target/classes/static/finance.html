<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
		<link rel="stylesheet" href="css/finance.css" />
		<script src="js/jquery-3.1.1.min.js"></script>
		<style>
			#expend td{
				color: red;
			}
		</style>
	</head>
	<body>
		<div id="finance_top">
			<div class="fin_top_left">
				<div class="left_top">
					<div class="in_1">
						<div class="con_1">
							今日收入
						</div>
						<div class="con_2">
							<b style="font-size: 19px;">￥</b><b>300.00</b>
						</div>
						<div class="con_3">
							+24%
						</div>
					</div>
					<div class="in_2">
						<div class="con_1">
							昨日收入
						</div>
						<div class="con_2">
							<b style="font-size: 19px;">￥</b><b>600.00</b>
						</div>
						<div class="con_3">
							+24%
						</div>
					</div>
					<div class="in_3">
						<img src="img/in.png" />
					</div>
				</div>
				<div class="left_bottom">
					<div class="out_1">
						<div class="con_1">
							今日支出
						</div>
						<div class="con_2">
							<b style="font-size: 19px;">￥</b><b>200.00</b>
						</div>
						<div class="con_3">
							-8.3%
						</div>
					</div>
					<div class="out_2">
						<div class="con_1">
							昨日支出
						</div>
						<div class="con_2">
							<b style="font-size: 19px;">￥</b><b>100.00</b>
						</div>
						<div class="con_3">
							-8.3%
						</div>
					</div>
					<div class="out_3">
						<img src="img/out.png" />
					</div>
				</div>
			</div>
			
			<div class="fin_top_right">
				<div class="title">
					<div class="tittle_left"><b>金额统计</b></div>
					<div class="tittle_right">
						<ul>
		                    <li><a href="#"><div style="color: #32a8ee;height:47px;border-bottom: 3px solid #32a8ee;"><b>周</b></div></a></li>
		                    <li><a href="#" id="month"><div><b>月</b></div></a></li>
		                    <li><a href="#" id="year"><div><b>年</b></div></a></li>
		                </ul>
					</div>
				</div>
				<div style="width:400px;height: 180px;float: left;margin-top: 5px;margin-left: 50px;">
					<canvas id="myChart" width="550" height="180"></canvas>
				</div>
			</div>
		</div>
		
		<div id="finance_con">
			<table	 cellspacing="0">
				<tr class="t_1" style="height: 80px;">
					<td class="td_title">金额详细</td>
					<td class="td_font_1">&nbsp;&nbsp;1月</td>
					<td class="td_font">&nbsp;&nbsp;2月</td>
					<td class="td_font">&nbsp;&nbsp;3月</td>
					<td class="td_font">&nbsp;&nbsp;4月</td>
					<td class="td_font">&nbsp;&nbsp;5月</td>
					<td class="td_font">&nbsp;&nbsp;6月</td>
					<td class="td_font">&nbsp;&nbsp;7月</td>
					<td class="td_font">&nbsp;&nbsp;8月</td>
					<td class="td_font">&nbsp;&nbsp;9月</td>
					<td class="td_font">&nbsp;&nbsp;10月</td>
					<td class="td_font">&nbsp;&nbsp;11月</td>
					<td class="td_font">&nbsp;&nbsp;12月</td>
				</tr>
		        <tr class="t_2" id="income">  
		            <td class="td_title">收入</td>  
		            <td class="td_font_1">1,690</td>  
		            <td>690</td>
		            <td>1,920</td>  
		            <td>1,990</td>
		            <td>2,040</td>
		            <td >7,710</td>
		            <td>1,240</td>
		            <td>1,540</td>
		            <td>7,210</td>
		            <td>1,090</td>
		            <td>340</td>
		            <td >3,760</td>
		        </tr>  
		        <!--<tr class="t_1">  
		            <td class="td_title">积累收入</td>  
		            <td class="td_font_1">1,690</td>  
		            <td>690</td>
		            <td>1,920</td>  
		            <td>1,990</td>
		            <td>2,040</td>
		            <td style="color: red ;">-7,710</td>
		            <td>1,240</td>
		            <td>1,540</td>
		            <td style="color: red ;">-7,210</td>
		            <td>1,090</td>
		            <td>340</td>
		            <td style="color: red ;">-3,760</td>
		        </tr>  -->
		        <tr class="t_2" id="expend">  
		            <td class="td_title">支出</td>  
		            <td class="td_font_1">1,690</td>  
		            <td>690</td>
		            <td>1,920</td>  
		            <td>1,990</td>
		            <td>2,040</td>
		            <td >-7,710</td>
		            <td>1,240</td>
		            <td>1,540</td>
		            <td >-7,210</td>
		            <td>1,090</td>
		            <td>340</td>
		            <td >-3,760</td>
		        </tr> 
		        <!--<tr class="t_1">  
		            <td class="td_title">积累支出</td>  
		            <td class="td_font_1">1,690</td>  
		            <td>690</td>
		            <td>1,920</td>  
		            <td>1,990</td>
		            <td>2,040</td>
		            <td style="color: red ;">-7,710</td>
		            <td>1,240</td>
		            <td>1,540</td>
		            <td style="color: red ;">-7,210</td>
		            <td>1,090</td>
		            <td>340</td>
		            <td style="color: red ;">-3,760</td>
		        </tr>  -->
		        <tr class="t_2" id="total">  
		            <td class="td_title">合计</td>  
		            <td class="td_font_1">1,690</td>  
		            <td>690</td>
		            <td>1,920</td>  
		            <td>1,990</td>
		            <td>2,040</td>
		            <td >-7,710</td>
		            <td>1,240</td>
		            <td>1,540</td>
		            <td >-7,210</td>
		            <td>1,090</td>
		            <td>340</td>
		            <td >-3,760</td>
		        </tr> 
		        <!--<tr class="t_1">  
		            <td class="td_title">合计积累</td>  
		            <td class="td_font_1">1,690</td>  
		            <td>690</td>
		            <td>1,920</td>  
		            <td>1,990</td>
		            <td>2,040</td>
		            <td >-7,710</td>
		            <td>1,240</td>
		            <td>1,540</td>
		            <td >-7,210</td>
		            <td>1,090</td>
		            <td>340</td>
		            <td >-3,760</td>
		        </tr>  -->
			</table>
		</div>
		
		<script>
			$(document).ready(function(){
				$.ajax({
				type:"get",
				url:"statistics/money",
				async:true,
				dataType: "json",//预期服务器返回的数据类型
				success:function(result){
					var i =0;
					$.each(result, function(result,item) {
					$('#income').children().eq(i+1).text(item.income);
					$('#expend').children().eq(i+1).text("-"+item.expend);
					var total =item.income-item.expend;
					$('#total').children().eq(i+1).text(total);
					i++;
						
					});
				},
				error:function(){
					alert('error');
				}
				});
			var ctx = document.getElementById("myChart").getContext('2d');
			var length = 7;
			var i = 0;
			var j = ",";
			$.ajax({
				type:"get",
				url:"statistics/week",
				async:true,
				dataType: "json",//预期服务器返回的数据类型
				success:function(result1){
					var data1 = [0,0,0,0,0,0,0]
					$.each(result1, function(result1,item1) {
						data1[i] =item1.income;
						i++;
						
					})
					var myChart = new Chart(ctx, {
			    type: 'line',
			    data: {
			        labels: ["周一", "周二", "周三", "周四","周五","周六","周日"],
			        datasets: [{
			            label: '周',
			            data: data1,
			            backgroundColor: [
			                'rgba(178, 238, 221, 0.2)',
			                'rgba(54, 162, 235, 0.2)',
			                'rgba(255, 206, 86, 0.2)',
			                'rgba(75, 192, 192, 0.2)',
			                'rgba(153, 102, 255, 0.2)',
			                'rgba(255, 159, 64, 0.2)'
			            ],
			            borderColor: [
							'rgba(0,172,130,1)',
			                'rgba(54, 162, 235, 1)',
			                'rgba(255, 206, 86, 1)',
			                'rgba(75, 192, 192, 1)',
			                'rgba(153, 102, 255, 1)',
			                'rgba(255, 159, 64, 1)'
			            ],
			            borderWidth: 1
			        }]
			    },
			    options: {
			        scales: {
			            yAxes: [{
			                ticks: {
			                    beginAtZero:true
			                }
			            }]
			        }
			    }
			});
					
				},
				error:function(){
					alert('error');
				}
				});
			
		})
			$('#month').on("click",function(){
				var cxt = document.getElementById("myChart").getContext('2d');
    			cxt.clearRect(0,0,400,180); 
    			var data1 = [177,188,200,565,777,898,778]
				var myChart1 = new Chart(cxt, {
			    type: 'line',
			    data: {
			        labels: ["一月", "二月", "三月", "四月","五月","六月","七月"],
			        datasets: [{
			            label: '周',
			            data: data1,
			            backgroundColor: [
			                'rgba(178, 238, 221, 0.2)',
			                'rgba(54, 162, 235, 0.2)',
			                'rgba(255, 206, 86, 0.2)',
			                'rgba(75, 192, 192, 0.2)',
			                'rgba(153, 102, 255, 0.2)',
			                'rgba(255, 159, 64, 0.2)'
			            ],
			            borderColor: [
							'rgba(0,172,130,1)',
			                'rgba(54, 162, 235, 1)',
			                'rgba(255, 206, 86, 1)',
			                'rgba(75, 192, 192, 1)',
			                'rgba(153, 102, 255, 1)',
			                'rgba(255, 159, 64, 1)'
			            ],
			            borderWidth: 1
			        }]
			    },
			    options: {
			        scales: {
			            yAxes: [{
			                ticks: {
			                    beginAtZero:true
			                }
			            }]
			        }
			    }
			});
				
				
			})
		
		
		</script>
		
	</body>
</html>
